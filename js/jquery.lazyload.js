!function(e,n){"function"==typeof define&&define.amd?define(["jquery"],n):n(e.jQuery)}(this,function(s){s.fn.lazyload=function(r){return this.each(function(){r=r||{};function f(n,e,i){if(!n.attr("src"))if(1==r.cache){console.log(n);var t,o=document.getElementById("canvas1").getContext("2d");image=new Image,image.src=n.attr(e),image.onload=function(){o.drawImage(image,0,0),t=o.getImageData(0,0,500,250),console.log(t)}}else{!function(e){e.width(),e.height(),e.offset().top,e.offset().left;e.clone().addClass("lazy-loding").insertBefore(e)[0].src=yiliaConfig.rootUrl+"img/img-loading.png",e.hide()}(n);var a=n.attr(e);n[0].onerror=function(e){!function(e,n){if(!e[0].src||!(0<e[0].src.indexOf("img-err.png")||0<e[0].src.indexOf("img-err2.png"))){e.width(),e.height();e[0].src=yiliaConfig.rootUrl+"img/img-err.png",n()}}(n,i)},n[0].onload=function(e){n.parent().find(".lazy-loding").remove(),n.show()},n[0].src=a}}var o=s.extend({},{},r),e=s(this),g=r.srcSign||"lazy-src",l=r.errCallBack||function(){},n=r.container||s(window);if(o.cache=[],"IMG"==this.tagName){var i={obj:e,tag:"img",url:e.attr(g)};o.cache.push(i)}else{var a=e.find("img");a.each(function(e){var n=this.nodeName.toLowerCase(),i=s(this).attr(g),t={obj:a.eq(e),tag:n,url:i};o.cache.push(t)})}function t(){var r,c=n.height();r=s(window).get(0)===window?s(window).scrollTop():n.offset().top,s.each(o.cache,function(e,n){var i,t=n.obj,o=n.tag,a=n.url;t&&(i=t.offset().top-r,t.height(),0<=i&&i<c&&(a&&"img"===o&&f(t,g,l),n.obj=null))})}t(),n.bind("scroll",t),n.bind("resize",t)})}});